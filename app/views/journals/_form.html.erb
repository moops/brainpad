<script type="text/javascript">
  $(document).ready(function() {
    $( "#journal_entry_on" ).datepicker();
    $( "#journal_entry_on" ).datepicker( "option", "dateFormat", "yy-mm-dd" );
  });
</script>

<% form_for(@journal) do |f| %>

<% if session[:user_id] %>
    <%= hidden_field_tag('journal[person_id]',session[:user_id]) %>
<% end %>
<table cellpadding="3" cellspacing="0" border="0">
    <tr>
        <td id="errors" colspan="5">
            <% unless @journal.errors.empty? %>
                <ul>
                <% @journal.errors.each_full do |message| %>
                    <li><%= message %></li>
                <% end %>
                </ul>
            <% end %></td>
            <% if flash[:notice] %>
                <div class="notice"><%=h flash[:notice] %></div>
            <% end %></td></tr>
    <tr>
        <td><%= label(:journal, :entry_on, 'Date') %></td>
        <td><%= f.text_field(:entry_on, :size => '12', :class => 'text') %></td>
        <td><%= f.label(:type) %></td>
        <td>
            <%= f.select('journal_type', Lookup.get_list('jour_type').collect {|l| [ l.description, l.id ] }) %></td>
        <td rowspan="2">&nbsp;</td></tr>    
    <tr>
        <td><%= f.label(:entry) %></td>
        <td colspan="3" rowspan="2"><%= f.text_area('entry', :cols => 60, :rows => 5) %></td></tr>
    <tr>
        <td>&nbsp;</td>
        <td class="submit">
            <%= f.submit(@journal.id ? 'update' : 'create') %></td></tr>
</table>

<% end %>
